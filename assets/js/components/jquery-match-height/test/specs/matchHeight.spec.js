describe("matchHeight",function(){beforeEach(function(){jasmine.addMatchers({toBeWithinTolerance:function(){return{compare:function(e,t,i){return 0!==i&&(i=i||1),{pass:Math.abs(t-e)<=i}}}}})}),it("has been defined",function(e){var t=$.fn.matchHeight;expect($.isFunction(t)).toBe(!0),expect($.isArray(t._groups)).toBe(!0),expect($.isNumeric(t._throttle)).toBe(!0),expect(typeof t._maintainScroll).toBe("boolean"),expect($.isFunction(t._rows)).toBe(!0),expect($.isFunction(t._apply)).toBe(!0),expect($.isFunction(t._applyDataApi)).toBe(!0),expect($.isFunction(t._update)).toBe(!0),expect($.isFunction(t._parse)).toBe(!0),expect($.isFunction(t._parseOptions)).toBe(!0),e()}),it("has matched heights automatically after images load",function(e){var t=$(".image-items"),i=testHelper.getCurrentBreakpoint(),n=t.find(".item-0").outerHeight(),o=t.find(".item-1").outerHeight(),a=t.find(".item-2").outerHeight(),t=t.find(".item-3").outerHeight();"mobile"!==i&&("tablet"===i?(expect(n).toBeWithinTolerance(o),expect(a).toBeWithinTolerance(t)):"desktop"===i&&(expect(n).toBeWithinTolerance(t),expect(o).toBeWithinTolerance(t),expect(a).toBeWithinTolerance(t))),e()}),it("has found rows correctly",function(e){var t=$(".simple-items").children(".item"),t=$.fn.matchHeight._rows(t),i=testHelper.getCurrentBreakpoint(),n=4,o=2;testHelper.isMediaQueriesSupported&&("mobile"===i?(n=1,o=8):"tablet"===i&&(n=2,o=4)),expect(t.length).toBe(o),$.each(t,function(i,e){expect(e.length).toBe(n),e.each(function(e,t){expect($(t).hasClass("item-"+(i*n+e))).toBe(!0)})}),e()}),it("has matched heights when byRow true",function(e){expect(-1.0001).not.toBeWithinTolerance(0),expect(-1).toBeWithinTolerance(0),expect(-.1).toBeWithinTolerance(0),expect(0).toBeWithinTolerance(0),expect(.1).toBeWithinTolerance(0),expect(1).toBeWithinTolerance(0),expect(1.0001).not.toBeWithinTolerance(0),$(".simple-items, .image-items, .nested-items-parent, .nested-items,.fixed-items, .inline-block-items, .inline-flex-items, .items-with-float, .inline-style-items, .remove-items").each(function(){var e=$(this).children(".item"),e=$.fn.matchHeight._rows(e);$.each(e,function(e,t){var o=t.first().outerHeight(),a=0;t.each(function(){var e=$(this),t=e.css("height"),i=e.outerHeight(),n=(e.css("height",""),e.outerHeight());e.css("height",t),expect(i).toBeWithinTolerance(o),a<n&&(a=n)}),expect(o).toBeWithinTolerance(a)})}),e()}),it("has matched heights when byRow false",function(e){$.each($.fn.matchHeight._groups,function(){this.options._oldByRow=this.options.byRow,this.options.byRow=!1}),$.fn.matchHeight._update(),$(".simple-items, .image-items,.fixed-items, .inline-block-items, .inline-flex-items, .items-with-float, .inline-style-items, .remove-items").each(function(){var e=$(this).children(".item"),o=e.first().outerHeight(),a=0;e.each(function(){var e=$(this),t=e.css("height"),i=e.outerHeight(),n=(e.css("height",""),e.outerHeight());e.css("height",t),expect(i).toBeWithinTolerance(o),a<n&&(a=n)}),expect(o).toBeWithinTolerance(a)}),$.each($.fn.matchHeight._groups,function(){this.options.byRow=this.options._oldByRow,delete this.options._oldByRow}),$.fn.matchHeight._update(),e()}),it("has matched heights for hidden items",function(e){$("body").removeClass("test-hidden"),$(".hidden-items .item-2 .items-container, .hidden-items .item-3 .items-container").each(function(){var e=$(this).children(".item"),e=$.fn.matchHeight._rows(e);$.each(e,function(e,t){var o=t.first().outerHeight(),a=0;t.each(function(){var e=$(this),t=e.css("height"),i=e.outerHeight(),n=(e.css("height",""),e.outerHeight());e.css("height",t),expect(i).toBeWithinTolerance(o),a<n&&(a=n)}),expect(o).toBeWithinTolerance(a)})}),$("body").addClass("test-hidden"),e()}),it("has matched heights when using data api",function(e){var t=$(".data-api-items"),i=testHelper.getCurrentBreakpoint(),n=t.find(".item-0").outerHeight(),o=t.find(".item-1").outerHeight(),a=t.find(".item-2").outerHeight(),t=t.find(".item-3").outerHeight();"mobile"!==i&&(expect(n).toBeWithinTolerance(o),expect(a).toBeWithinTolerance(t),expect(n).not.toBeWithinTolerance(a),expect(o).not.toBeWithinTolerance(t)),e()}),it("has matched heights when using target option",function(e){var t=$(".target-items"),i=t.find(".item-0").outerHeight(),n=t.find(".item-1").outerHeight(),o=t.find(".item-2").outerHeight(),t=t.find(".item-3").outerHeight();expect(i).toBeWithinTolerance(n),expect(o).toBeWithinTolerance(n),expect(t).toBeWithinTolerance(n),e()}),it("has applied the property option",function(e){var t=$(".property-items"),i=testHelper.getCurrentBreakpoint(),n=$.fn.matchHeight._parse,o=n(t.find(".item-0").css("min-height")),a=n(t.find(".item-1").css("min-height")),s=n(t.find(".item-2").css("min-height")),n=n(t.find(".item-3").css("min-height"));"tablet"===i?(expect(o).toBeWithinTolerance(a),expect(n).toBeWithinTolerance(s)):"desktop"===i&&(expect(o).toBeWithinTolerance(a),expect(s).toBeWithinTolerance(a),expect(n).toBeWithinTolerance(a)),e()}),it("can manually update heights and fires global callbacks",function(e){var t=testHelper.getCurrentBreakpoint(),t=(spyOn($.fn.matchHeight,"_beforeUpdate"),spyOn($.fn.matchHeight,"_afterUpdate"),$(".simple-items .item-1").append("<p>Test content update.</p>"),$.fn.matchHeight._update(),"mobile"!==t&&$(".simple-items").each(function(){var e=$(this).children(".item"),e=$.fn.matchHeight._rows(e);$.each(e,function(e,t){var o=t.first().outerHeight(),a=0;t.each(function(){var e=$(this),t=e.css("height"),i=e.outerHeight(),n=(e.css("height",""),e.outerHeight());e.css("height",t),expect(i).toBeWithinTolerance(o),a<n&&(a=n)}),expect(o).toBeWithinTolerance(a)})}),expect($.fn.matchHeight._beforeUpdate).toHaveBeenCalled(),expect($.fn.matchHeight._afterUpdate).toHaveBeenCalled(),$.fn.matchHeight._beforeUpdate.calls.argsFor(0)),i=$.fn.matchHeight._afterUpdate.calls.argsFor(0);expect($.isArray(t[1])).toBe(!0),expect($.isArray(i[1])).toBe(!0),e()}),it("parses numbers and NaN",function(e){var t=$.fn.matchHeight._parse;expect(t(1)).toBe(1),expect(t(1.1)).toBe(1.1),expect(t("1")).toBe(1),expect(t("1.1")).toBe(1.1),expect(t("1px")).toBe(1),expect(t("1.1px")).toBe(1.1),expect(t(NaN)).toBe(0),e()}),it("parses options",function(e){var t=$.fn.matchHeight._parseOptions,i={byRow:!0,property:"height",target:null,remove:!1};expect(t()).toEqual(i),expect(t({byRow:!1,property:"min-height",target:null,remove:!0})).toEqual({byRow:!1,property:"min-height",target:null,remove:!0}),expect(t("remove")).toEqual({byRow:i.byRow,property:i.property,target:i.target,remove:!0}),expect(t(!0)).toEqual({byRow:!0,property:i.property,target:i.target,remove:i.remove}),expect(t(!1)).toEqual({byRow:!1,property:i.property,target:i.target,remove:i.remove}),e()}),it("maintains inline styles",function(e){var t=$(".inline-style-items"),i=t.find(".item-0")[0].style.display,n=t.find(".item-1")[0].style.position,o=t.find(".item-2")[0].style.minHeight,t=t.find(".item-3")[0].style.padding;expect(i).toBe("inline-block"),expect(n).toBe("relative"),expect(o).toBe("10px"),expect(t).toBe("15px"),e()}),it("can be removed",function(e){var t=$.fn.matchHeight,i=$(".remove-items").find(".item-0"),n=!1;i.matchHeight({remove:!0}),expect(i[0].style.height).toBeFalsy();for(var o=0;o<t._groups.length;o+=1){var a=t._groups[o];if(-1!==$.inArray(i[0],a.elements)){n=!0;break}}expect(n).toBeFalsy(),e()})}),jasmine.getEnv().addReporter({suiteStarted:function(){window.specsPassed=[],window.specsFailed=[],$(".test-summary").text("running tests...")},specDone:function(e){("passed"===e.status?window.specsPassed:window.specsFailed).push(e.id)},suiteDone:function(){$(".test-summary").toggleClass("has-passed",0===window.specsFailed.length).toggleClass("has-failed",0!==window.specsFailed.length).text(window.specsPassed.length+" tests passed, "+window.specsFailed.length+" failed")}});var testHelper={isMediaQueriesSupported:void 0!==(window.matchMedia||window.msMatchMedia)||0<=navigator.userAgent.indexOf("MSIE 9.0"),getCurrentBreakpoint:function(){if(testHelper.isMediaQueriesSupported){var e=$(window).width();if(e<=640)return"mobile";if(e<=1024)return"tablet"}return"desktop"}};